<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ChatMed</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <div class="app-container">
    <!-- Auth Container -->
    <div id="auth-container" class="auth-container">
      <div class="auth-box">
        <div class="logo-container">
          <img src="/images/logo_medchat-r.png" alt="Logo ChatMed" class="app-logo">
          <h1>ChatMed</h1>
        </div>
        <div class="auth-tabs">
          <button id="login-tab" class="auth-tab active">Connexion</button>
          <button id="register-tab" class="auth-tab">Inscription</button>
        </div>
        
        <!-- Login Form -->
        <form id="login-form" class="auth-form active">
          <div class="form-group">
            <label for="login-username">Nom d'utilisateur</label>
            <input type="text" id="login-username" required>
          </div>
          <div class="form-group">
            <label for="login-password">Mot de passe</label>
            <input type="password" id="login-password" required>
          </div>
          <button type="submit" class="btn btn-primary">Se connecter</button>
          <p id="login-error" class="error-message"></p>
        </form>
        
        <!-- Register Form -->
        <form id="register-form" class="auth-form">
          <div class="form-group">
            <label for="register-username">Nom d'utilisateur</label>
            <input type="text" id="register-username" required>
          </div>
          <div class="form-group">
            <label for="register-email">Email</label>
            <input type="email" id="register-email" required>
          </div>
          <div class="form-group">
            <label for="register-password">Mot de passe</label>
            <input type="password" id="register-password" required>
          </div>
          <button type="submit" class="btn btn-primary">S'inscrire</button>
          <p id="register-error" class="error-message"></p>
        </form>
      </div>
    </div>
    
    <!-- Chat Container (Hidden until logged in) -->
    <div id="chat-container" class="chat-container hidden">
      <div class="sidebar">
        <div class="sidebar-header">
          <div class="header-logo">
            <img src="/images/logo_medchat-r.png" alt="Logo ChatMed" class="app-logo">
            <h2>ChatMed</h2>
          </div>
          <div class="user-info">
            <span id="username-display"></span>
            <button id="logout-btn" class="btn-icon">
              <i class="fas fa-sign-out-alt"></i>
            </button>
          </div>
        </div>
        
        <div class="sidebar-content">
          <div class="rooms-section">
            <div class="rooms-header">
              <h3>Salles</h3>
              <button id="create-room-btn" class="btn-icon">
                <i class="fas fa-plus"></i>
              </button>
            </div>
            <div id="rooms-list" class="rooms-list">
              <!-- Rooms will be added here dynamically -->
            </div>
          </div>
          
          <div class="notifications-section">
            <h3>Notifications <span id="notification-count" class="notification-badge hidden">0</span></h3>
            <div id="notifications-list" class="notifications-list">
              <!-- Notifications will be added here dynamically -->
            </div>
          </div>
        </div>
      </div>
      
      <div class="chat-main">
        <div id="welcome-message" class="welcome-message">
          <h2>Bienvenue sur ChatMed</h2>
          <p>Sélectionnez une salle pour commencer à discuter</p>
        </div>
        
        <div id="active-chat" class="active-chat hidden">
          <div class="chat-header">
            <h2 id="active-room-name"></h2>
            <p id="active-room-description"></p>
          </div>
          
          <div id="messages-container" class="messages-container">
            <!-- Messages will be added here dynamically -->
          </div>
          
          <div class="message-compose">
            <input type="text" id="message-input" placeholder="Tapez votre message...">
            <div class="message-actions">
              <button id="send-message-btn" class="btn btn-primary">
                <i class="fas fa-paper-plane"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Create Room Modal -->
    <div id="create-room-modal" class="modal hidden">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Créer une nouvelle salle</h2>
          <button id="close-modal-btn" class="btn-icon">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <form id="create-room-form">
          <div class="form-group">
            <label for="room-name">Nom de la salle</label>
            <input type="text" id="room-name" required>
          </div>
          <div class="form-group">
            <label for="room-description">Description</label>
            <textarea id="room-description" required></textarea>
          </div>
          <div class="form-group">
            <label for="room-category">Catégorie</label>
            <select id="room-category" required>
              <option value="">Sélectionnez une catégorie</option>
              <option value="Maths">Mathématiques</option>
              <option value="Informatique">Informatique</option>
              <option value="Physique">Physique</option>
              <option value="Chimie">Chimie</option>
              <option value="Biologie">Biologie</option>
              <option value="Langues">Langues</option>
              <option value="Histoire">Histoire</option>
              <option value="Géographie">Géographie</option>
              <option value="Philosophie">Philosophie</option>
              <option value="Autre">Autre</option>
            </select>
          </div>
          <button type="submit" class="btn btn-primary">Créer la salle</button>
        </form>
      </div>
    </div>
  </div>
  
  <script src="https://cdn.socket.io/4.6.0/socket.io.min.js"></script>
  <script src="/js/auth.js"></script>
  <script src="/js/rooms.js"></script>
  <script src="/js/chat.js"></script>
  <script src="/js/app.js"></script>
</body>
</html> 